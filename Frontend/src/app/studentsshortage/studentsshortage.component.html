<app-navbar-loggedin></app-navbar-loggedin>

<div class="container">
    <!-- Page Heading -->
    <h2 class="text-center">Student Attendance Report</h2>

    <!-- Search Bar -->

    <!-- Fake Attendance Warning -->
    <div *ngIf="fakeAttendance" class="alert alert-danger text-center mt-3">
         Fake Attendance Detected: You marked attendance in multiple sections!
    </div>

    <!-- Attendance Table -->
    <div *ngIf="attendanceReport.length > 0" class="mt-4">
        <h4 class="text-center">Attendance Report (Below 80%)</h4>
        <table class="table table-striped table-bordered mt-3">
            <thead class="table-dark">
                <tr>
                    <th>Subject Code</th>
                    <th>Subject Name</th>
                    <th>Classes Attended</th>
                    <th>Classes Taken</th>
                    <th>Attendance (%)</th>
                </tr>
            </thead>
            <tbody>
                <ng-container *ngFor="let record of attendanceReport">
                    <tr *ngIf="record.percentage < 80" class="low-attendance" (ngInit)="incrementcount()">
                        <td>{{ record.subjectCode }}</td>
                        <td>{{ record.subjectName }}</td>
                        <td>{{ record.classesAttended }}</td>
                        <td>{{ record.classesTaken }}</td>
                        <td>{{ record.percentage }}%</td>
                    </tr>
                </ng-container>
            </tbody>
        </table>
    </div>
    

    <!-- No Data Message -->
    <!-- <div *ngIf="this.count == 0 "class="alert alert-info text-center mt-3">
        No Attendance Shortages
    </div> -->
</div>
